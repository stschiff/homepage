<!doctype html>

<script src="https://kit.fontawesome.com/d7cf9532bd.js" crossorigin="anonymous"></script>
<script src="../js/toggle.js"></script>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Stephan Schiffels - Trident's restaurant - your order please?</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
        <!-- <link rel="stylesheet" href="/css/default.css" /> -->
    </head>
    <body>
        <div class="container">
        <header class="section">
            <h1 class="title is-1">
                <a href="../">Stephan Schiffels</a>
            </h1>
            <h2 class="subtitle">
                Population Genetics – Computational Methods - Human History
            </h2>
            <nav class="navbar">
                <div class="navbar-brand">
                    <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                    </a>
                </div>
                <div class="navbar-menu" id="navMenu">
                    <div class="navbar-start">
                        <a href="../" class="navbar-item">Home</a>
                        <a href="../research.html" class="navbar-item">Research</a>
                        <a href="../publications.html" class="navbar-item">Publications</a>
                        <a href="../talks.html" class="navbar-item">Talks</a>
                        <a href="../videos.html" class="navbar-item">Videos</a>
                        <a href="../resources.html" class="navbar-item">Resources</a>
                        <a href="../blog.html" class="navbar-item">News/Blog</a>
                    </div>
                    <div class="navbar end">
                        <a class="navbar-item" href="https://www.eva.mpg.de/archaeogenetics/staff/stephan-schiffels/"><img src="../images/mpi_logo.jpg"></a>
                        <a class="navbar-item" href="https://twitter.com/stschiff"><span class="icon is-large"><i class="fa-brands fa-twitter fa-2xl"></i></span></a>
                        <a class="navbar-item" href="https://github.com/stschiff"><span class="icon is-large"><i class="fa-brands fa-github fa-2xl"></i></span></a>
                        <a class="navbar-item" href="https://medium.com/stephan-schiffels"><span class="icon is-large"><i class="fa-brands fa-medium fa-2xl"></i></span></a>
                        <a class="navbar-item" href="https://www.researchgate.net/profile/Stephan_Schiffels"><span class="icon is-large"><i class="fa-brands fa-researchgate fa-2xl"></i></span></a>
                        <a class="navbar-item" rel="me" href="https://ecoevo.social/@stschiff"><span class="icon is-large"><i class="fa-brands fa-mastodon fa-2xl"></i></span></a>
                    </div>
                </div>
            </nav>

        </header>

            <div class="columns">
                <div class="column is-two-thirds">
                    <main class="section">
                        <h1 class="title is-2">Trident's restaurant - your order please?</h1>
                        <div class="content">
                            <div class="mb-5"><a href="../blog.html"><i>← All Blog Posts</i></a></div>
<article>
    <header>
        Posted on October  4, 2023
        
            by Stephan Schiffels
        
        Categories: blog
    </header>
    
        <img src="../images/jay-wennington-N_Y88TWmGwA-unsplash.jpg">
    
    <p><em>This post was originally published on <a href="https://blog.poseidon-adna.org/posts/trident_14.html">the Poseidon Blog</a></em></p>
<p><em>Image credit by Unsplash</em></p>
<p>Today we’re releasing a new major release for trident, our command-line tool and workhorse for working with Poseidon packages.</p>
<p>If you haven’t checked it out yet, take a look <a href="https://www.poseidon-adna.org/#/trident">at our documentation</a>. With <code>trident</code>, you can download packages from our web-server, initialise new packages, perform validations, list summaries of packages, and - most importantly - forge new packages out of existing ones. This functionality, <code>forge</code> is more than a merge, and more than a subset tool. It is both. Perhaps a working analogy for what it does is a restaurant. At a restaurant, you order a specific meal, but you don’t care how the ingredients have been packaged, and with which other ingredients they are stored. You just want the chefs to assmble the meal, no matter whether the beans are stored together with the peas or not.</p>
<!--more-->
<p>With <code>forge</code>, you just show the program where to find the storage room (that’s what we call a base-directory that contains packages), and you tell it which individuals or groups you would like to include or exclude. Forge will then automatically look through <em>all</em> packages and assemble exactly the set of samples that you need in your new package.</p>
<p>Forge comes with a kind of mini-language to specify the ingredients that you need. This mini-language is something that we have clarified and subtly improved in this new release. There are four ways to ask forge to include entities in <code>forge</code>:</p>
<ol type="1">
<li>Include an individual by name: You can write <code>&lt;EAS006&gt;</code> (in angular brackets) to ask forge to look for the individual named “EAS006” (I’m glad you ask, it’s a male individual from Southern England who did 1500 years ago and was buried near a town called Eastry today.). If there are multiple versions of this individual, because there are multiple versions of packages, forge looks for this individual only on the latest version.</li>
<li>Include an individual by name, group and package: Sometimes, there are several individuals with that same name in your package collection, perhaps because you have multiple versions of the same package, or because for some reason you have already previously forged packages all in the same collection. In such a case, there is a more specific way to define an individual, via the syntax <code>&lt;2022_Gretzinger_AngloSaxons-1.0.0:England_EMA:EAS006&gt;</code>, which now specifies a very specific individual that is found in the given package and in the given group.</li>
<li>Include entire groups: You can write <code>England_EMA</code> to ask forge to look for <em>all</em> individuals that are associated with the group named “England_EMA” (I’m again glad you ask: EMA stands for “Early Middle Ages”). This again implicitly looks for the group only in the latest versions of packages.</li>
<li>Include entire packages: You can write <code>*2022_Gretzinger_AngloSaxons*</code> to ask forge to select for <em>all</em> individuals in the entire package.</li>
</ol>
<p>Note that you can combine these requests to merge them into the final forge. So for example you could say <code>&lt;EAS006&gt;,&lt;EAS001&gt;,England_IronAge</code> or so, which would then result in a package consisting of the two specified individuls plus <em>all</em> individuals from group “England_IronAge”. So this provides you with a lot of power already to select large numbers of samples in a succinct way. But sometimes you need even more power, because you want to also specifically <em>exclude</em> some samples. In <code>forge</code>, you can do that by prepending a minus-sign to any entity:</p>
<ol start="5" type="1">
<li>Exclude an individual by name: Write <code>-&lt;EAS006&gt;</code> to ask forge to remove any sample with that name from the final selection, in case it has been selected before.</li>
<li>Exclude an individual by name, group and package: Write <code>-&lt;2022_Gretzinger_AngloSaxons-0.1.0:England_EMA:EAS006&gt;</code> to not remove <em>all</em> individual with the name “EAS006”, but only the one in the specified package.</li>
<li>Exclude an entire group: Write <code>-England_EMA</code> to remove all individuals that belong to that group.</li>
<li>Exclude an entire package: Write <code>-*2022_Gretzinger_AngloSaxons*</code> to remove this package.</li>
</ol>
<p>So now you can accurately describe what you want to include and exclude. Note that the order matters, as you would expect: <code>*2022_Gretzinger_AngloSaxons*,-England_EMA,&lt;EAS006&gt;</code> will contain a selection that includes <code>&lt;EAS006&gt;</code>, since it was added back at the end. In contrast, <code>*2022_Gretzinger_AngloSaxons*,&lt;EAS006&gt;,-England_EMA</code> will <em>not</em> include the sample, as the entire group was removed after it was added, so it got removed again.</p>
<p>There is one more gist: If your forge-list starts with an exclusion statement, so if you just write <code>-*2022_Gretzinger_AngloSaxons*</code>, then this implicitly means that you include <em>all</em> latest versions of packages in the base directory. So this is a way to forge everything <em>except</em> a given package or group or individual.</p>
<p>The exact semantics of this forge-machinery are quite complex and powerful, and we have clarified how this works in the latest version, and made it specifically more consistent and intuitive. This in particular concerns a feature that we now built in for the first time: You can now append versions of packages explicitly to a package-name, to select a specific version of a package. This works both in package requests, and in individuals by name, group and package.</p>
<p>So <code>*2022_Gretzinger_AngloSaxons-1.2.1*</code> works, and <code>&lt;2022_Gretzinger_AngloSaxons-1.2.1:England_EMA:EAS006&gt;</code> works as well.</p>
<p>There was quite a bunch of refactoring of code that needed to happen under the hood to make this update possible, in particular in relation to supporting multiple versions of packages. This update will bring us a good step closer to making archaeoenetics analyses truly reproducible, as older versions of packages will continue to be served on our servers (which we will post about separately).</p>
</article>

                        </div>
                    </main>
                </div>
                <div class="column">
                    <aside class="section">
    <h2 class="title is-3">News</h2>
    <ul>
        
            <li class="columns">
                <div class="column is-two-thirds">
                    
                    
                        <u>October 27, 2023</u><br />
                        <span class="tag is-info">New Post</span><br />
                        <a href="../posts/2023-10-27-xerxes.html">    
                            <b>Xerxes's cutlery - enjoying your dinner?</b>
                        </a>
                    
                </div>
                <div class="column">
                    
                        <img src="../images/oliver-augustijn-4Af55Wg3vEs-unsplash.jpg">
                    
                </div>
            </li>
            <hr />
        
            <li class="columns">
                <div class="column is-two-thirds">
                    
                    
                        <u>October  4, 2023</u><br />
                        <span class="tag is-info">New Post</span><br />
                        <a href="../posts/2023-10-04-trident.html">    
                            <b>Trident's restaurant - your order please?</b>
                        </a>
                    
                </div>
                <div class="column">
                    
                        <img src="../images/jay-wennington-N_Y88TWmGwA-unsplash.jpg">
                    
                </div>
            </li>
            <hr />
        
            <li class="columns">
                <div class="column is-two-thirds">
                    
                    
                        <u>September 29, 2023</u><br />
                        <span class="tag is-info">New Post</span><br />
                        <a href="../posts/2023-09-29-podcast.html">    
                            <b>Two Podcast episodes recorded in German</b>
                        </a>
                    
                </div>
                <div class="column">
                    
                </div>
            </li>
            <hr />
        
            <li class="columns">
                <div class="column is-two-thirds">
                    
                        <u>August 16, 2023</u><br />
                        <span class="tag is-success">New Publication</span><br />
                        <a href="../pubs/Wang2023-dh.html">
                            <b>High-coverage genome of the Tyrolean Iceman reveals unusually
              high Anatolian farmer ancestry</b>
                        </a> by Ke Wang et al.. <i>Cell Genomics</i>.
                    
                    
                </div>
                <div class="column">
                    
                        <img src="images/publications/Wang2023-dh.jpg">
                    
                </div>
            </li>
            <hr />
        
            <li class="columns">
                <div class="column is-two-thirds">
                    
                    
                        <u>July 14, 2023</u><br />
                        <span class="tag is-info">New Post</span><br />
                        <a href="../posts/2023-07-14-conversation_piece_sutherland.html">    
                            <b>Article in "The Conversation" by Victoria Gibbon on the Sutherland project</b>
                        </a>
                    
                </div>
                <div class="column">
                    
                </div>
            </li>
            <hr />
        
            <li class="columns">
                <div class="column is-two-thirds">
                    
                        <u>May 24, 2023</u><br />
                        <span class="tag is-success">New Publication</span><br />
                        <a href="../pubs/Gibbon2023-in.html">
                            <b>Confronting historical legacies of biological anthropology in
              South Africa-Restitution, redress and community-centered
              science: The Sutherland Nine</b>
                        </a> by Victoria E Gibbon et al.. <i>PloS one</i>.
                    
                    
                </div>
                <div class="column">
                    
                        <img src="images/publications/Gibbon2023-in.jpg">
                    
                </div>
            </li>
            <hr />
        
            <li class="columns">
                <div class="column is-two-thirds">
                    
                    
                        <u>April 21, 2023</u><br />
                        <span class="tag is-info">New Post</span><br />
                        <a href="../posts/2023-04-21-DHMD-youtube.html">    
                            <b>Recording of short talk available (in German)</b>
                        </a>
                    
                </div>
                <div class="column">
                    
                </div>
            </li>
            <hr />
        
            <li class="columns">
                <div class="column is-two-thirds">
                    
                        <u>February 28, 2023</u><br />
                        <span class="tag is-success">New Publication</span><br />
                        <a href="../pubs/Schmid2023-um.html">
                            <b>Estimating human mobility in Holocene Western Eurasia with
              large-scale ancient genomic data</b>
                        </a> by Clemens Schmid and <u>Stephan Schiffels</u>. <i>Proceedings of the National Academy of Sciences of the United
              States of America</i>.
                    
                    
                </div>
                <div class="column">
                    
                        <img src="images/publications/Schmid2023-um.jpg">
                    
                </div>
            </li>
            <hr />
        
            <li class="columns">
                <div class="column is-two-thirds">
                    
                        <u>December 3, 2022</u><br />
                        <span class="tag is-success">New Publication</span><br />
                        <a href="../pubs/Wang2022-cv.html">
                            <b>4000-year-old hair from the Middle Nile highlights unusual
              ancient DNA degradation pattern and a potential source of early
              eastern Africa pastoralists</b>
                        </a> by Ke Wang et al.. <i>Scientific reports</i>.
                    
                    
                </div>
                <div class="column">
                    
                        <img src="images/publications/Wang2022-cv.jpg">
                    
                </div>
            </li>
            <hr />
        
            <li class="columns">
                <div class="column is-two-thirds">
                    
                    
                        <u>December  2, 2022</u><br />
                        <span class="tag is-info">New Post</span><br />
                        <a href="../posts/2022-12-02-cavote.html">    
                            <b>Current Archaeology Project of the Year - Vote now!</b>
                        </a>
                    
                </div>
                <div class="column">
                    
                        <img src="../images/cavote.jpg">
                    
                </div>
            </li>
            <hr />
        
            <li class="columns">
                <div class="column is-two-thirds">
                    
                        <u>November 22, 2022</u><br />
                        <span class="tag is-success">New Publication</span><br />
                        <a href="../pubs/Waldman2022-hw.html">
                            <b>Genome-wide data from medieval German Jews show that the
              Ashkenazi founder event pre-dated the 14th century</b>
                        </a> by Shamam Waldman et al.. <i>Cell</i>.
                    
                    
                </div>
                <div class="column">
                    
                        <img src="images/publications/Waldman2022-hw.jpg">
                    
                </div>
            </li>
            <hr />
        
            <li class="columns">
                <div class="column is-two-thirds">
                    
                        <u>November 5, 2022</u><br />
                        <span class="tag is-success">New Publication</span><br />
                        <a href="../pubs/Gretzinger2022-wf.html">
                            <b>Transformations in early medieval England</b>
                        </a> by Joscha Gretzinger and <u>Stephan Schiffels</u>. <i>Current Archaeology</i>.
                    
                    
                </div>
                <div class="column">
                    
                        <img src="images/publications/Gretzinger2022-wf.jpg">
                    
                </div>
            </li>
            <hr />
        
            <li class="columns">
                <div class="column is-two-thirds">
                    
                    
                        <u>November  5, 2022</u><br />
                        <span class="tag is-info">New Post</span><br />
                        <a href="../posts/2022-11-05-caissue.html">    
                            <b>Current Archaeology Special Issue</b>
                        </a>
                    
                </div>
                <div class="column">
                    
                        <img src="../images/publications/Gretzinger2022-wf.jpg">
                    
                </div>
            </li>
            <hr />
        
            <li class="columns">
                <div class="column is-two-thirds">
                    
                        <u>November, 2022</u><br />
                        <span class="tag is-success">New Publication</span><br />
                        <a href="../pubs/Gretzinger2022-et.html">
                            <b>A glimpse into darkness: Population genetics of the European
               middle ages</b>
                        </a> by Joscha Gretzinger and <u>Stephan Schiffels</u>. <i>New Narratives for the First Millennium AD? : Alte und neue
               Perspektiven der archäologischen Forschung zum 1. Jahrtausend n.
               Chr.</i>.
                    
                    
                </div>
                <div class="column">
                    
                        <img src="images/publications/Gretzinger2022-et.jpg">
                    
                </div>
            </li>
            <hr />
        
            <li class="columns">
                <div class="column is-two-thirds">
                    
                        <u>November 1, 2022</u><br />
                        <span class="tag is-success">New Publication</span><br />
                        <a href="../pubs/Gower2022-px.html">
                            <b>Demes: a standard format for demographic models</b>
                        </a> by Graham Gower et al.. <i>Genetics</i>.
                    
                    
                </div>
                <div class="column">
                    
                        <img src="images/publications/Gower2022-px.jpg">
                    
                </div>
            </li>
            <hr />
        
    </ul>
</aside>
                </div>
            </div>

            <footer class="footer has-text-centered">
                Powered by
                <a href="http://jaspervdj.be/hakyll">Hakyll</a> and <a href="https://bulma.io">Bulma</a>. Sourcecode available on
                <a href="https://github.com/stschiff/stschiff.github.io">github</a>.
            </footer>
        </div>
    </div>
    </body>
</html>
